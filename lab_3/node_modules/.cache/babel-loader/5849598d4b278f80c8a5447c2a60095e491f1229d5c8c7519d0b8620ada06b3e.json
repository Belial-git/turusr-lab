{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/Desktop/\\u0421\\u0435\\u0441\\u0441\\u0438\\u044F/\\u0420\\u0430\\u0437\\u0440\\u0430\\u0431 \\u0418\\u041F/lab_3/src/Component/List.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport TaskView from \"./TaskView\";\nimport TaskForm from \"./TaskForm\";\nimport { logDOM } from \"@testing-library/react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ListComponent = props => {\n  _s();\n  const [List, setList] = useState([]);\n  useEffect(() => {\n    fetch('http://localhost:8000/api/task', {\n      method: 'get'\n    }).then(response => response.json()).then(remoteData => {\n      setList(remoteData.data);\n    }).catch(err => console.log('ERROR', err));\n  }, []);\n  const handleDelete = key => {\n    fetch('http://localhost:8000/api/task' + List[key].id, {\n      method: 'delete'\n    }).then(response => response.json()).then(remoteData => {\n      let tmp = Array.from(List);\n      tmp.splice(key, 1);\n      setList(tmp);\n    }).catch(err => console.log('ERROR', err));\n  };\n  const save = content => {\n    let fd = new FormData();\n    fd.append('content', content);\n    fetch('http://localhost:8000/api/task', {\n      method: 'post',\n      body: fd\n    }).then(response => response.json()).then(remoteData => {\n      let tmp = Array.from(List);\n      tmp.push(remoteData.data);\n      setList(tmp);\n    }).catch(err => console.log('ERROR', err));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: 'list',\n    children: [/*#__PURE__*/_jsxDEV(TaskForm, {\n      onSave: content => save(content)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this), List.map((item, key) => {\n      return /*#__PURE__*/_jsxDEV(TaskView, {\n        task: item,\n        onDelete: () => handleDelete(key)\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 20\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 12\n  }, this);\n};\n_s(ListComponent, \"pp6+SDSxD4cGk2HNsTyFf+1twVY=\");\n_c = ListComponent;\nexport default ListComponent;\nvar _c;\n$RefreshReg$(_c, \"ListComponent\");","map":{"version":3,"names":["useEffect","useState","TaskView","TaskForm","logDOM","ListComponent","props","List","setList","fetch","method","then","response","json","remoteData","data","catch","err","console","log","handleDelete","key","id","tmp","Array","from","splice","save","content","fd","FormData","append","body","push","map","item"],"sources":["/Users/macbook/Desktop/Сессия/Разраб ИП/lab_3/src/Component/List.js"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport TaskView from \"./TaskView\";\nimport TaskForm from \"./TaskForm\";\nimport {logDOM} from \"@testing-library/react\";\n\nconst ListComponent = props => {\n\n    const [List, setList] = useState([]);\n\n    useEffect(() => {\n        fetch('http://localhost:8000/api/task', {\n            method: 'get',\n        }).then(response => response.json()).then(remoteData => {\n            setList(remoteData.data)\n        }).catch(err=>console.log('ERROR',err))\n    }, [])\n\n    const handleDelete = (key) => {\n        fetch('http://localhost:8000/api/task'+List[key].id, {\n            method: 'delete',\n        }).then(response => response.json()).then(remoteData => {\n            let tmp = Array.from(List);\n            tmp.splice(key, 1);\n            setList(tmp);\n        }).catch(err=>console.log('ERROR',err))\n    }\n\n    const save = (content) => {\n        let fd=new FormData();\n        fd.append('content',content);\n\n        fetch('http://localhost:8000/api/task', {\n            method: 'post',\n            body: fd,\n        }).then(response => response.json()).then(remoteData => {\n            let tmp = Array.from(List);\n            tmp.push(remoteData.data);\n            setList(tmp);\n        }).catch(err=>console.log('ERROR',err))\n    }\n\n    return <div className={'list'}>\n        <TaskForm onSave={(content) => save(content)}/>\n        {List.map((item, key) => {\n            return <TaskView key={item.id} task={item} onDelete={() => handleDelete(key)}/>\n        })}\n    </div>\n}\n\nexport default ListComponent"],"mappings":";;AAAA,SAAQA,SAAS,EAAEC,QAAQ,QAAO,OAAO;AACzC,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,QAAQ,MAAM,YAAY;AACjC,SAAQC,MAAM,QAAO,wBAAwB;AAAC;AAE9C,MAAMC,aAAa,GAAGC,KAAK,IAAI;EAAA;EAE3B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EAEpCD,SAAS,CAAC,MAAM;IACZS,KAAK,CAAC,gCAAgC,EAAE;MACpCC,MAAM,EAAE;IACZ,CAAC,CAAC,CAACC,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,EAAE,CAAC,CAACF,IAAI,CAACG,UAAU,IAAI;MACpDN,OAAO,CAACM,UAAU,CAACC,IAAI,CAAC;IAC5B,CAAC,CAAC,CAACC,KAAK,CAACC,GAAG,IAAEC,OAAO,CAACC,GAAG,CAAC,OAAO,EAACF,GAAG,CAAC,CAAC;EAC3C,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMG,YAAY,GAAIC,GAAG,IAAK;IAC1BZ,KAAK,CAAC,gCAAgC,GAACF,IAAI,CAACc,GAAG,CAAC,CAACC,EAAE,EAAE;MACjDZ,MAAM,EAAE;IACZ,CAAC,CAAC,CAACC,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,EAAE,CAAC,CAACF,IAAI,CAACG,UAAU,IAAI;MACpD,IAAIS,GAAG,GAAGC,KAAK,CAACC,IAAI,CAAClB,IAAI,CAAC;MAC1BgB,GAAG,CAACG,MAAM,CAACL,GAAG,EAAE,CAAC,CAAC;MAClBb,OAAO,CAACe,GAAG,CAAC;IAChB,CAAC,CAAC,CAACP,KAAK,CAACC,GAAG,IAAEC,OAAO,CAACC,GAAG,CAAC,OAAO,EAACF,GAAG,CAAC,CAAC;EAC3C,CAAC;EAED,MAAMU,IAAI,GAAIC,OAAO,IAAK;IACtB,IAAIC,EAAE,GAAC,IAAIC,QAAQ,EAAE;IACrBD,EAAE,CAACE,MAAM,CAAC,SAAS,EAACH,OAAO,CAAC;IAE5BnB,KAAK,CAAC,gCAAgC,EAAE;MACpCC,MAAM,EAAE,MAAM;MACdsB,IAAI,EAAEH;IACV,CAAC,CAAC,CAAClB,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,EAAE,CAAC,CAACF,IAAI,CAACG,UAAU,IAAI;MACpD,IAAIS,GAAG,GAAGC,KAAK,CAACC,IAAI,CAAClB,IAAI,CAAC;MAC1BgB,GAAG,CAACU,IAAI,CAACnB,UAAU,CAACC,IAAI,CAAC;MACzBP,OAAO,CAACe,GAAG,CAAC;IAChB,CAAC,CAAC,CAACP,KAAK,CAACC,GAAG,IAAEC,OAAO,CAACC,GAAG,CAAC,OAAO,EAACF,GAAG,CAAC,CAAC;EAC3C,CAAC;EAED,oBAAO;IAAK,SAAS,EAAE,MAAO;IAAA,wBAC1B,QAAC,QAAQ;MAAC,MAAM,EAAGW,OAAO,IAAKD,IAAI,CAACC,OAAO;IAAE;MAAA;MAAA;MAAA;IAAA,QAAE,EAC9CrB,IAAI,CAAC2B,GAAG,CAAC,CAACC,IAAI,EAAEd,GAAG,KAAK;MACrB,oBAAO,QAAC,QAAQ;QAAe,IAAI,EAAEc,IAAK;QAAC,QAAQ,EAAE,MAAMf,YAAY,CAACC,GAAG;MAAE,GAAvDc,IAAI,CAACb,EAAE;QAAA;QAAA;QAAA;MAAA,QAAkD;IACnF,CAAC,CAAC;EAAA;IAAA;IAAA;IAAA;EAAA,QACA;AACV,CAAC;AAAA,GA1CKjB,aAAa;AAAA,KAAbA,aAAa;AA4CnB,eAAeA,aAAa;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}